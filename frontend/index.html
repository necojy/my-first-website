<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>全端連線極簡測試</title>
    <style>
        body { font-family: sans-serif; text-align: center; padding-top: 50px; }
        button { padding: 15px 30px; font-size: 18px; cursor: pointer; background-color: #0070f3; color: white; border: none; border-radius: 5px; }
        #result { margin-top: 30px; font-size: 20px; font-weight: bold; color: #333; }
    </style>
</head>
<body>
    <h1>Vercel ➡️ Hugging Face 連線測試</h1>
    
    <button onclick="testConnection()">發送測試訊號</button>
    
    <p id="result">等待測試中...</p>

    <script>
        async function testConnection() {
            const resultElement = document.getElementById('result');
            resultElement.innerText = "連線中，請稍候...";
            resultElement.style.color = "orange";
            
            // 你的 Hugging Face 專屬 API 網址 (對應剛剛寫的 python 路由)
            const backendUrl = "https://necojy-watsons-bot.hf.space/api/test_connection";

            try {
                // 向後端發送請求
                const response = await fetch(backendUrl);
                const data = await response.json();
                
                // 如果後端回傳 success，印出成功訊息
                if(data.status === 'success') {
                    resultElement.innerText = data.message;
                    resultElement.style.color = "green";
                } else {
                    resultElement.innerText = "連線異常：" + JSON.stringify(data);
                    resultElement.style.color = "red";
                }
            } catch (error) {
                // 如果連網路都沒通，就會跑到這裡
                resultElement.innerText = "連線完全失敗！請檢查後端 HF 是否正在 Running。錯誤訊息：" + error;
                resultElement.style.color = "red";
            }
        }
    </script>
</body>
</html>