<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>é›²ç«¯æ©Ÿå™¨äººæ¸¬è©¦</title>
</head>
<body>
    <h1>é›²ç«¯éš±å½¢æ©Ÿå™¨äººï¼šæŠ“å– YouTube æ¨™é¡Œ</h1>
    
    <button onclick="sendData()">å‘¼å«æ©Ÿå™¨äººå‡ºå‹•ï¼</button>
    
    <p id="result" style="color: blue; font-weight: bold;"></p>

    <script>
        async function sendData() {
            // 1. æ­£ç¢ºçš„ Render ç¶²å€
            const backendUrl = "https://necojy-watsons-bot.hf.space/api/open_browser";
            
            // ã€è²¼å¿ƒè¨­è¨ˆã€‘å› ç‚ºé›²ç«¯é–‹ç€è¦½å™¨éœ€è¦å¹¾ç§’é˜ï¼Œå…ˆåœ¨ç•«é¢é¡¯ç¤ºç­‰å¾…æ–‡å­—
            document.getElementById('result').innerText = "æ©Ÿå™¨äººæ­£åœ¨é›²ç«¯é–‹å•Ÿç¶²é ï¼Œè«‹ç¨å€™ç´„ 5~10 ç§’...";
            
            try {
                const response = await fetch(backendUrl);
                const data = await response.json();
                
                let htmlContent = "";

                // ğŸŒŸ 1. å¦‚æœæˆåŠŸæŠ“åˆ°è³‡æ–™ï¼šæ¼‚äº®åœ°å°å‡ºæ¸…å–®ï¼
                if (data['çµ±è¨ˆçµæœ'] && data['çµ±è¨ˆçµæœ'].length > 0) {
                    htmlContent += `<h2 style="color: green;">${data.message}</h2>`;
                    htmlContent += `<h3>å…±æ‰¾åˆ° ${data['è³‡æ–™ç¸½ç­†æ•¸']} ç­†è¨‚å–®è³‡æ–™ï¼š</h3>`;
                    htmlContent += "<ul style='text-align: left; display: inline-block;'>";
                    
                    data['çµ±è¨ˆçµæœ'].forEach(item => {
                        htmlContent += `<li style="font-size: 18px; margin-bottom: 8px;">${item}</li>`;
                    });
                    htmlContent += "</ul>";
                } 
                // ğŸŒŸ 2. å¦‚æœæ²’æŠ“åˆ°è³‡æ–™ï¼Œä½†æ˜¯æœ‰å›å‚³å ±éŒ¯æˆªåœ–
                else if (data.screenshot_base64) {
                    htmlContent += `<p style="color: red;">å¾Œç«¯å›å ±ï¼š${data.message} (éŒ¯èª¤: ${data.error})</p>`;
                    htmlContent += `<br><br><h3 style="color:red;">ğŸ¤– æ©Ÿå™¨äººç•¶ä¸‹çœ‹åˆ°çš„ç•«é¢ï¼š</h3>`;
                    htmlContent += `<img src="data:image/png;base64,${data.screenshot_base64}" style="max-width: 100%; border: 3px solid red; border-radius: 8px;"/>`;
                }
                // ğŸŒŸ 3. å…¶ä»–ç‹€æ³
                else {
                    htmlContent += "å¾Œç«¯å›å ±ç‹€æ³ï¼š" + JSON.stringify(data);
                }
                
                document.getElementById('result').innerHTML = htmlContent;

            } catch (error) {
                document.getElementById('result').innerText = "é€£ç·šå¤±æ•—ï¼Œè«‹æª¢æŸ¥ç¶²å€æˆ–å¾Œç«¯ç‹€æ…‹";
            }
        }
    </script>
</body>
</html>

<!-- uvicorn main:app --reload -->
 <!-- http://localhost:8000/api/open_browser -->