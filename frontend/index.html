<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>進階應用：資料傳輸測試</title>
</head>
<body>
    <h1>發票系統後端運算測試</h1>
    
    <input type="text" id="invoiceInput" placeholder="請輸入10碼發票號碼">
    <button onclick="sendData()">送出給後端處理</button>
    
    <p id="result" style="color: blue; font-weight: bold;"></p>

    <script>
        async function sendData() {
            // 記得替換成你的 Render 網址，注意後面的路徑改成了 /api/process_invoice
            const backendUrl = "https://my-first-website-4vhe.onrender.com/api/scrape_test";
            // 取得輸入框的值
            const inputValue = document.getElementById('invoiceInput').value;
            
            try {
                // 發送 POST 請求
                const response = await fetch(backendUrl, {
                    method: 'POST', // 指定為 POST 傳輸
                    headers: {
                        'Content-Type': 'application/json' // 告訴後端我們傳的是 JSON
                    },
                    // 將資料打包成字串送出
                    body: JSON.stringify({ invoice_number: inputValue }) 
                });
                
                const data = await response.json();
                document.getElementById('result').innerText = data.message;
            } catch (error) {
                document.getElementById('result').innerText = "連線失敗";
            }
        }
    </script>
</body>
</html>