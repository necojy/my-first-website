<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>雲端機器人測試</title>
</head>
<body>
    <h1>雲端隱形機器人：抓取 YouTube 標題</h1>
    
    <button onclick="sendData()">呼叫機器人出動！</button>
    
    <p id="result" style="color: blue; font-weight: bold;"></p>

    <script>
        async function sendData() {
            // 1. 正確的 Render 網址
            const backendUrl = "https://my-first-website-1-4ew9.onrender.com/api/open_browser";
            
            // 【貼心設計】因為雲端開瀏覽器需要幾秒鐘，先在畫面顯示等待文字
            document.getElementById('result').innerText = "機器人正在雲端開啟網頁，請稍候約 5~10 秒...";
            
            try {
                // 2. 發送最單純的 GET 請求 (把 POST 那些複雜的設定都刪掉)
                const response = await fetch(backendUrl);
                
                // 3. 將抓回來的資料轉換成 JSON 格式
                const data = await response.json();
                
                // 4. 資料順利回來了！把 "網頁標題是" 顯示到畫面上
                document.getElementById('result').innerText = "抓取成功！網頁標題是：" + data['網頁標題是'];
                
            } catch (error) {
                document.getElementById('result').innerText = "連線失敗，請檢查網址或後端狀態";
            }
        }
    </script>
</body>
</html>

<!-- uvicorn main:app --reload -->
 <!-- http://localhost:8000/api/open_browser -->