<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>é›²ç«¯æ©Ÿå™¨äººæ¸¬è©¦</title>
</head>
<body>
    <h1>é›²ç«¯éš±å½¢æ©Ÿå™¨äººï¼šæŠ“å– YouTube æ¨™é¡Œ</h1>
    
    <button onclick="sendData()">å‘¼å«æ©Ÿå™¨äººå‡ºå‹•ï¼</button>
    
    <p id="result" style="color: blue; font-weight: bold;"></p>

    <script>
        async function sendData() {
            // 1. æ­£ç¢ºçš„ Render ç¶²å€
            const backendUrl = "https://necojy-watsons-bot.hf.space/api/open_browser";
            
            // ã€è²¼å¿ƒè¨­è¨ˆã€‘å› ç‚ºé›²ç«¯é–‹ç€è¦½å™¨éœ€è¦å¹¾ç§’é˜ï¼Œå…ˆåœ¨ç•«é¢é¡¯ç¤ºç­‰å¾…æ–‡å­—
            document.getElementById('result').innerText = "æ©Ÿå™¨äººæ­£åœ¨é›²ç«¯é–‹å•Ÿç¶²é ï¼Œè«‹ç¨å€™ç´„ 5~10 ç§’...";
            
            try {
                const response = await fetch(backendUrl);
                const data = await response.json();
                
                // ğŸŒŸ åˆ¤æ–·ï¼šå¦‚æœå›å‚³çš„è³‡æ–™è£¡é¢æœ‰ "çµ±è¨ˆçµæœ" (ä»£è¡¨æŠ“å–æˆåŠŸ)
                if (data['çµ±è¨ˆçµæœ']) {
                    // æŠŠé™£åˆ—è³‡æ–™è®Šæˆæ¼‚äº®çš„ HTML æ¸…å–®
                    let htmlContent = `æŠ“å–æˆåŠŸï¼å…±æ‰¾åˆ° ${data['è³‡æ–™ç¸½ç­†æ•¸']} ç­†è¨‚å–®è³‡æ–™ã€‚<br><br>`;
                    htmlContent += "<ul>";
                    data['çµ±è¨ˆçµæœ'].forEach(item => {
                        htmlContent += `<li style="color: #333; margin-bottom: 5px;">${item}</li>`;
                    });
                    htmlContent += "</ul>";
                    
                    // ç”¨ innerHTML æ›¿æ›æ‰åŸæœ¬çš„æ–‡å­—ï¼Œé€™æ¨£æ‰èƒ½é¡¯ç¤ºæ’ç‰ˆå¥½çš„æ¸…å–®
                    document.getElementById('result').innerHTML = htmlContent;
                } 
                // åˆ¤æ–·ï¼šå¦‚æœå¤±æ•—ï¼Œå°±æŠŠå¾Œç«¯å›å‚³çš„éŒ¯èª¤å°å‡ºä¾†çœ‹
                // åˆ¤æ–·ï¼šå¦‚æœå¤±æ•—ï¼Œå°±æŠŠå¾Œç«¯å›å‚³çš„éŒ¯èª¤å°å‡ºä¾†çœ‹
                else {
                    let errorHtml = "å¾Œç«¯å›å ±ç‹€æ³ï¼š" + JSON.stringify(data);
                    
                    // ğŸ“¸ å¦‚æœå¾Œç«¯æœ‰å‚³ç…§ç‰‡éä¾†ï¼Œå°±æŠŠç…§ç‰‡é¡¯ç¤ºå‡ºä¾†ï¼
                    if (data.screenshot) {
                        errorHtml += `<br><br><h3 style="color:red;">ğŸ¤– æ©Ÿå™¨äººç•¶ä¸‹çœ‹åˆ°çš„ç•«é¢ï¼š</h3>`;
                        errorHtml += `<img src="data:image/png;base64,${data.screenshot}" style="max-width: 100%; border: 3px solid red; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.2);"/>`;
                    }
                    
                    document.getElementById('result').innerHTML = errorHtml;
                }
                
            } catch (error) {
                document.getElementById('result').innerText = "é€£ç·šå¤±æ•—ï¼Œè«‹æª¢æŸ¥ç¶²å€æˆ–å¾Œç«¯ç‹€æ…‹";
            }
        }
    </script>
</body>
</html>

<!-- uvicorn main:app --reload -->
 <!-- http://localhost:8000/api/open_browser -->