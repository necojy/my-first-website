<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>é›²ç«¯æ©Ÿå™¨äººæ¸¬è©¦</title>
</head>
<body>
    <h1>é›²ç«¯éš±å½¢æ©Ÿå™¨äººï¼šæŠ“å– YouTube æ¨™é¡Œ</h1>
    
    <button onclick="sendData()">å‘¼å«æ©Ÿå™¨äººå‡ºå‹•ï¼</button>
    
    <p id="result" style="color: blue; font-weight: bold;"></p>

    <script>
        async function sendData() {
            // 1. æ­£ç¢ºçš„ Render ç¶²å€
            const backendUrl = "https://necojy-watsons-bot.hf.space/api/open_browser";
            
            // ã€è²¼å¿ƒè¨­è¨ˆã€‘å› ç‚ºé›²ç«¯é–‹ç€è¦½å™¨éœ€è¦å¹¾ç§’é˜ï¼Œå…ˆåœ¨ç•«é¢é¡¯ç¤ºç­‰å¾…æ–‡å­—
            document.getElementById('result').innerText = "æ©Ÿå™¨äººæ­£åœ¨é›²ç«¯é–‹å•Ÿç¶²é ï¼Œè«‹ç¨å€™ç´„ 5~10 ç§’...";
            
            try {
                const response = await fetch(backendUrl);
                const data = await response.json();

                // å»ºè­°ä¿®æ”¹ï¼šå…ˆä¸è¦æŠŠæ•´åŒ…è³‡æ–™å°å‡ºä¾†ï¼Œåªå°å‡º message å°±å¥½ï¼Œç•«é¢æœƒæ›´ä¹¾æ·¨
                let errorHtml = "å¾Œç«¯å›å ±ç‹€æ³ï¼š" + data.message;
                
                // ğŸ“¸ ã€ä¿®æ­£è™•1ã€‘å°‡ screenshot æ”¹ç‚º screenshot_base64
                if (data.screenshot_base64) {
                    errorHtml += `<br><br><h3 style="color:red;">ğŸ¤– æ©Ÿå™¨äººç•¶ä¸‹çœ‹åˆ°çš„ç•«é¢ï¼š</h3>`;
                    
                    // ã€ä¿®æ­£è™•2ã€‘é€™è£¡ä¹Ÿå¿…é ˆæ”¹æˆ data.screenshot_base64
                    errorHtml += `<img src="data:image/png;base64,${data.screenshot_base64}" style="max-width: 100%; border: 3px solid red; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.2);"/>`;
                }
                
                document.getElementById('result').innerHTML = errorHtml;

            } catch (error) {
                document.getElementById('result').innerText = "é€£ç·šå¤±æ•—ï¼Œè«‹æª¢æŸ¥ç¶²å€æˆ–å¾Œç«¯ç‹€æ…‹";
            }
        }
    </script>
</body>
</html>

<!-- uvicorn main:app --reload -->
 <!-- http://localhost:8000/api/open_browser -->